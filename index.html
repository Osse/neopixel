<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <title>NeoPixel LED control</title>
        <style>
            body {
                font-family: Sans-serif;
                margin: 20px auto 0 auto;
                padding: 10px;
                width: 600px;
                background-color: #dddddd;
                border: 1px #bbbbbb solid;
            }
            div#form_container {
                margin: auto;
                width: 300px;
            }

            label, input {
                width: 100px;
                display: inline-block;
            }
            div#chosen_color {
                width: 200px;
                height: 25px;
                background-color: black;
                border: 1px #bbbbbb solid;
            }
        </style>
        <script>
            var websock;

            function get(id) {
                return document.getElementById(id);
            }
            
            function send(id) {
                websock.send(id + ":" + get(id).value);
                var newColor = "rgb(" + [get("red").value, get("green").value, get("blue").value].join(",") + ")";
                get("chosen_color").style.backgroundColor = newColor;
            }

            function start() {
                websock = new WebSocket('ws://' + window.location.hostname + ':81/');
                websock.onopen = function(evt) {
                    console.log('websock open');
                };
                websock.onclose = function(evt) {
                    console.log('websock close');
                };
                websock.onerror = function(evt) {
                    console.log(evt);
                };
            }
        </script>
    </head>
    <body onload="start();">
        <h1>NeoPixel LED control</h1>
        <p>
            Adjust the color of the
            <a href="https://www.adafruit.com/product/1938">LED</a> on your own
            desk!
        </p>

        <h2>Form</h2>

        <p>Select values between 0 and 255 inclusive, or use the color picker.</p>

        <div id="form_container">
            <form method="get">
                <p>
                    <label for="red">Red:</label>
                    <input type="range" min="0" max="255" step="1" value="0" onchange="send('red');"
                        class="slider" id="red" name="red" />
                </p>
                <p>
                    <label for="green">Green:</label>
                    <input type="range" min="0" max="255" step="1" value="0" onchange="send('green');"
                        class="slider" id="green" name="green" />
                </p>
                <p>
                    <label for="Blue">Blue:</label>
                    <input type="range" min="0" max="255" step="1" value="0" onchange="send('blue');"
                        class="slider" id="blue" name="blue" />
                </p>
                <p>
                    <div id="chosen_color" />
                </p>
                <!-- <p> -->
                <!--     <input type="button" onclick="send();" value="Set color!" /> -->
                <!-- </p> -->
            </form>
        </div>
    </body>
</html>
